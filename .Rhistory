shockvar_med <- paste(yvar[shockvar],'.', as.character(j), sep = '')
fit <- VARrf(data = sim_dt, pmax = 2,p =2, s = j)
innov <- fit$fit_rf$xvar
innov <- innov[nrow(innov),]
# get d_i
innov[,shockvar_med] <- 0
bench <- innov
innov[,shockvar_med] <- 1
# E[y|d_i=1] - E[y_i|d_i=0]
for (i in yvar) {
irf_bench[irf_bench$s == j, i] <-
predict(fit$fit_rf, newdata = bench)[['regrOutput']][[i]][['predicted']]
irf_innov[irf_innov$s == j, i] <-
predict(fit$fit_rf, newdata = innov)[['regrOutput']][[i]][['predicted']]
irf_diff[irf_innov$s == j, i] <- irf_innov[irf_innov$s == j, i] - irf_bench[irf_innov$s == j, i]
}
}
View(irf_diff)
View(fit)
View(fit)
fit <- VARrf(data = sim_dt, pmax = 2,p =2, s = j)
View(fit)
load_all()
fit <- VARrf(data = sim_dt, pmax = 2,p =2, s = j)
View(fit)
is.null(s)
fit <- VARrf(data = sim_dt, pmax = 2,p =3, s = j)
fit <- VARrf(data = sim_dt, pmax = 3,p =3, s = j)
View(fit)
View(fit)
load_all()
fit <- VARrf(data = sim_dt, pmax = 3,p =3, s = j)
View(fit)
source('E:/17_HuaDong/reserch/VAR_RandomRorest/VARrsf/data-raw/IRF_rf.R', echo=TRUE)
View(irf_diff)
plot(irf_diff$y1)
plot(irf_diff$y2)
View(irf_diff)
source('E:/17_HuaDong/reserch/VAR_RandomRorest/VARrsf/data-raw/IRF_rf.R', echo=TRUE)
View(irf_diff)
View(innov)
View(bench)
source('E:/17_HuaDong/reserch/VAR_RandomRorest/VARrsf/data-raw/IRF_rf.R', echo=TRUE)
View(irf_diff)
source('E:/17_HuaDong/reserch/VAR_RandomRorest/VARrsf/data-raw/IRF_rf.R', echo=TRUE)
View(irf_diff)
plot(irf_diff$y2)
load_all()
fit <- VARrf(data = sim_dt, pmax = pmax, p = p, s = j)
View(fit)
source('E:/17_HuaDong/reserch/VAR_RandomRorest/VARrsf/data-raw/IRF_rf.R', echo=TRUE)
View(irf_diff)
plot(irf_diff$y2)
plot(irf_diff$y1)
View(irf_bench)
View(irf_innov)
# initialize, and get yvar and shock var
fit <- VARrf(data = data, p = 1) # just for yvar
load_all()
IRFrf(data = sim_dt, pmax = 5, s = 36, shockvar = 1)
load_all()
IRFrf(data = sim_dt, pmax = 5, s = 36, shockvar = 1)
p_load(tsDyn,vars,randomForestSRC,bvartools,MyFun,tidyverse,devtools,
parallel,doParallel,ggplot2)
ggplot(data = picdata, aes(x = s, y = y1)) + geom_line()
# fit_rf <- VARrf(data = sim_dt, pmax = 5)
picdata <- IRFrf(data = sim_dt, pmax = 5, s = 36, shockvar = 1)
ggplot(data = picdata, aes(x = s, y = y1)) + geom_line()
ggplot(data = picdata, aes(x = s, y = y1)) + geom_line() +
geom_hline(yintercept = 0) + theme_bw()
B1
# 广义脉冲响应的比较
ar2ma(B1)
# fit_rf <- VARrf(data = sim_dt, pmax = 5)
picdata <- IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1)
ggplot(data = picdata, aes(x = s, y = y1)) + geom_line() +
geom_hline(yintercept = 0) + theme_bw()
# 广义脉冲响应的比较
ar2ma(B1)
install.packages("glmnet")
rm(list = ls())
library(pacman)
p_load(tsDyn,vars,randomForestSRC,bvartools,MyFun,tidyverse,devtools,
parallel,doParallel,ggplot2)
load_all()
seed <- 1024
# 参数矩阵，第一列截距，第二列趋势项
B1 <- matrix(c(0.2, 0.1, 0.2, 0.3,0.3,0.4,0.2,0.1), 2)
sim_dt <- VAR.sim(B1, n = 200, lag = 2,include = 'none',show.parMat = T) %>%
as.data.frame()
colnames(sim_dt) <- c('y1','y2')
# ts.plot(sim_dt)
fit <- vars::VAR(sim_dt, p = 2,type = 'none')
# summary(fit)
# fit_rf <- VARrf(data = sim_dt, pmax = 5)
picdata <- IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1)
View(picdata)
ggplot(data = picdata, aes(x = s, y = y1)) + geom_line() +
geom_hline(yintercept = 0) + theme_bw()
load_all()
picdata <- IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = 1)
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = 1)
View(picdata)
cl <- parallel::makeCluster(ncores = ncores)
ncores = 6
cl <- parallel::makeCluster(ncores = ncores)
cl <- parallel::makeCluster(ncores)
doParallel::registerDoParallel(cl)
picdata <- foreach::foreach(i = 1:100) %dopar% {
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
}
load_all()
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
picdata <- foreach::foreach(i = 1:100) %dopar% {
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
}
picdata <- foreach::foreach(i = 1:100) %dopar% {
devtools::load_all()
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
}
parallel::stopCluster(cl)
cl <- parallel::makeCluster(ncores)
doParallel::registerDoParallel(cl)
picdata <- foreach::foreach(i = 1:100,.packages = tidyverse) %dopar% {
devtools::load_all()
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
}
picdata <- foreach::foreach(i = 1:100,.packages = 'tidyverse') %dopar% {
devtools::load_all()
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
}
rm(list = ls())
library(pacman)
p_load(tsDyn,vars,randomForestSRC,bvartools,MyFun,tidyverse,devtools,
parallel,doParallel,ggplot2)
load_all()
seed <- 1024
# 参数矩阵，第一列截距，第二列趋势项
B1 <- matrix(c(0.2, 0.1, 0.2, 0.3,0.3,0.4,0.2,0.1), 2)
sim_dt <- VAR.sim(B1, n = 200, lag = 2,include = 'none',show.parMat = T) %>%
as.data.frame()
colnames(sim_dt) <- c('y1','y2')
parallel::stopCluster(cl)
ncores = 6
cl <- parallel::makeCluster(ncores)
doParallel::registerDoParallel(cl)
picdata <- foreach::foreach(i = 1:100,.packages = 'tidyverse') %dopar% {
devtools::load_all()
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
}
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
sim_dt
picdata <- foreach::foreach(i = 1:100,.packages = 'tidyverse') %dopar% {
devtools::load_all()
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
}
?foreach
picdata <- foreach::foreach(i = 1:100,sim_dt = sim_dt,.packages = 'tidyverse') %dopar% {
devtools::load_all()
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
}
rep(sim_dt,2)
rep(sim_dt,2) %>% class()
a <- rep(sim_dt,2)
?rep
i=1
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
?list
itevar <- as.list(sim_dt)
itevar <- list(sim_dt= sim_dt)
itevar <- list(sim_dt= sim_dt) %>% rep(2)
itevar <- list(sim_dt= sim_dt) %>% rep(100)
cl <- parallel::makeCluster(ncores)
doParallel::registerDoParallel(cl)
picdata <- foreach::foreach(i = 1:100,sim_dt = itevar,.packages = 'tidyverse') %dopar% {
devtools::load_all()
IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1,histime = i)
}
picdata <- foreach::foreach(i = 1:100,itevar = itevar,.packages = 'tidyverse') %dopar% {
devtools::load_all()
IRFrf(data = itevar, pmax = 5, s = 12, shockvar = 1,histime = i)
}
picdata <- foreach::foreach(i = 1:100,itevar = itevar,.packages = 'tidyverse') %dopar% {
devtools::load_all()
IRFrf(data = itevar, pmax = 5, s = 12, shockvar = 1,histime = i)
}
View(picdata)
?magrittr
3 magrittr::`%>%` c(1)
3 %>% c(1)
3 `%>%` c(1)
load_all()
IRFrf_gen(data = sim_dt[1:10,], pmax = 5, s = 12, shockvar = 1, ncores = 7)
data = sim_dt[1:10,]
# para set up
itevar <- rep(list(data = data), nrow(data) - pmax)
load_all()
IRFrf_gen(data = sim_dt[1:10,], pmax = 5, s = 12, shockvar = 1, ncores = 7)
data = sim_dt[1:10,]
pmax = 5
s = 12
shockvar = 1
ncores = 7
# para set up
itevar <- rep(list(data = data), nrow(data) - pmax)
pmax_para <- rep(pmax,nrow(data) - pmax)
s <- rep(s,nrow(data) - pmax)
shockvar <- rep(shockvar,nrow(data) - pmax)
# initialize
cl <- parallel::makeCluster(ncores)
doParallel::registerDoParallel(cl)
# parallel compute
picdata <- foreach::foreach(i = 1:(nrow(data) - pmax),itevar = itevar,
pmax = pmax_para,s = s, shockvar = shockvar,
.packages = 'tidyverse') %dopar% {
devtools::load_all()
IRFrf(data = itevar, pmax = pmax, s = s, shockvar = shockvar,histime = i)
}
(nrow(data) - pmax)
IRFrf_gen(data = sim_dt[1:30,], pmax = 5, s = 12, shockvar = 1, ncores = 7)
IRFrf_gen(data = sim_dt[1:50,], pmax = 5, s = 12, shockvar = 1, ncores = 7)
load_all()
IRFrf_gen(data = sim_dt[1:50,], pmax = 5, s = 12, shockvar = 1, ncores = 7)
# 绘图LP
picdata <- IRFrf(data = sim_dt, pmax = 5, s = 12, shockvar = 1)
load_all()
IRFrf_gen(data = sim_dt[1:50,], pmax = 5, s = 12, shockvar = 1, ncores = 7)
library(devtools)
document()
devtools::document()
devtools::document()
library(pacman)
p_load(tsDyn,vars,randomForestSRC,bvartools,MyFun,tidyverse,devtools,
parallel,doParallel,ggplot2)
load_all()
# panel data
regdata <- openxlsx::read.xlsx('E:\\13_PapersFromFriends\\OuYangZG\\EPUMoneyPolicy\\RCode\\data-raw/2020季度数据.xlsx',1)
ans <- VARrf(regdata, indx = c('num','year'), p = 2)
load_all()
ans <- VARrf(regdata, indx = c('num','year'), p = 2)
ans <- VARrf(regdata, indx = c('num','year'), p = 2)
dt_gen_panel(data, s = s, plag = p, yname = T)
load_all()
ans <- VARrf(regdata, indx = c('num','year'), p = 2)
View(regdata)
load_all()
ans <- VARrf(regdata, indx = c('num','year'), p = 2)
load_all()
ans <- VARrf(regdata, indx = c('num','year'), p = 2)
View(fit_rf)
View(ans)
unique(regdata$num)
load_all()
ans <- VARrf(regdata[regdata$num == 39| regdata$num == 49,], indx = c('num','year'), p = 2)
View(ans)
ans <- VARrf(regdata[regdata$num == 39| regdata$num == 49,], indx = c('num','year'), p = 2, s = 3)
View(ans)
ans <- VARrf(regdata[regdata$num == 39| regdata$num == 49,], indx = c('num','year'), pmax = 5, s = 3)
View(ans)
ans <- VARrf(regdata[regdata$num == 39| regdata$num == 49,], indx = c('num','year'), pmax = 8, s = 3)
View(ans)
ans <- VARrf(regdata[regdata$num == 39| regdata$num == 49,], indx = c('num','year'), pmax = 10, s = 3)
View(ans)
load_all()
ans <- VARrf(regdata[regdata$num == 39| regdata$num == 49,], indx = c('num','year'), pmax = 10, s = 3)
mse_star
View(fit_rf)
View(ans)
ans[["regdata"]]
ans[["regdata"]][,1:2]
load_all()
ans <- VARrf(regdata[regdata$num == 39| regdata$num == 49,], indx = c('num','year'), pmax = 15, s = 3)
View(ans)
ans <- VARrf(regdata[regdata$num == 39| regdata$num == 49,], indx = c('num','year'), pmax = 15, s = 1)
View(ans)
dt_gen(regdata = regdata, indx = NULL, s = 1, plag = 1, yname = T)[['yname']]
dt_gen(regdata = regdata, indx = c('num','year'), s = 1, plag = 1, yname = T)[['yname']]
load_all()
picdata <- IRFrf(data = regdata[regdata$num == 39| regdata$num == 49,],
indx = c('num','year'),p = 2, s = 12, shockvar = 1)
load_all()
picdata <- IRFrf(data = regdata[regdata$num == 39| regdata$num == 49,],
indx = c('num','year'),p = 2, s = 12, shockvar = 1)
View(picdata)
ggplot(data = picdata, aes(x = s, y = rd)) + geom_line() +
geom_hline(yintercept = 0) + theme_bw()
ggplot(data = picdata, aes(x = s, y = cash)) + geom_line() +
geom_hline(yintercept = 0) + theme_bw()
ggplot(data = picdata, aes(x = s, y = debt)) + geom_line() +
geom_hline(yintercept = 0) + theme_bw()
picdata <- IRFrf(data = regdata[regdata$num == 39| regdata$num == 49,],
indx = c('num','year'),p = 8, s = 12, shockvar = 1)
ggplot(data = picdata, aes(x = s, y = debt)) + geom_line() +
geom_hline(yintercept = 0) + theme_bw()
unique(regdata$num)[1:5]
regdata[regdata$num %in% c(39.49,63,66,78),]
picdata <- IRFrf(data = regdata[regdata$num %in% c(39.49,63,66,78),],
indx = c('num','year'),p = 8, s = 12, shockvar = 1)
ggplot(data = picdata, aes(x = s, y = debt)) + geom_line() +
geom_hline(yintercept = 0) + theme_bw()
View(picdata)
document()
rm(list = ls())
library(pacman)
p_load(tsDyn,vars,randomForestSRC,bvartools,MyFun,tidyverse,devtools,
parallel,doParallel,ggplot2)
load_all()
seed <- 1024
# 参数矩阵，第一列截距，第二列趋势项
B1 <- matrix(c(0.2, 0.1, 0.2, 0.3,0.3,0.4,0.2,0.1), 2)
sim_dt <- VAR.sim(B1, n = 200, lag = 2,include = 'none',show.parMat = T) %>%
as.data.frame()
colnames(sim_dt) <- c('y1','y2')
# summary(fit)
fit <- VARrf(sim_dt)
fit <- VARrf(sim_dt, p = 4)
# panel data
regdata <- openxlsx::read.xlsx('E:\\13_PapersFromFriends\\OuYangZG\\EPUMoneyPolicy\\RCode\\data-raw/2020季度数据.xlsx',1)
ans <- VARrf(regdata[regdata$num == 39| regdata$num == 49,], indx = c('num','year'), pmax = 15, s = 1)
picdata <- IRFrf(data = regdata[regdata$num %in% c(39.49,63,66,78),],
indx = c('num','year'),p = 8, s = 12, shockvar = 1)
VARrf(data = sim_dt, p = 2)
irf <- IRFrf(data = sim_dt, p = 2)
View(irf)
data <- list(sim_dt,sim_dt)
lapply(data,IRFrf, p = 2)
View(data)
mapply(IRFrf, data = data, histime = c(1,2))
mapply(IRFrf, data = data, histime = list(1,2))
mapply(IRFrf, data = data, histime = list(1,2), p = c(2,2))
ans <- mapply(IRFrf, data = data, histime = list(1,2), p = c(2,2))
View(ans)
load_all()
ans <- mapply(IRFrf, data = data, histime = c(1,2))
load_all()
ans <- mapply(IRFrf, data = data, histime = c(1,2))
?mapply
ans <- mapply(IRFrf, data = data, histime = c(1,2), SIMPLIFY = FALSE)
View(ans)
data = sim_dt
data = sim_dt
pmax = 5
s = 12
shockvar = 1
n <- nrow(data) - pmax -s
itevar <- rep(list(data), n)
nhist <- 1:n
s <- 1:12
pmax <- rep(pmax, n)
shockvar <- rep(shockvar,n)
data = sim_dt
pmax = 5
s = 12
shockvar = 1
d = 1
n = 3
itevar <- rep(list(data), n)
nhist <- 1:n
s <- rep(s, n)
d <- rep(d,n)
pmax <- rep(pmax, n)
shockvar <- rep(shockvar,n)
ans <- mapply(IRFrf, data = data, pmax = pmax, s = s,
d = d, shockvar = shockvar, d = d, histime = nhist, SIMPLIFY = FALSE)
ans <- mapply(IRFrf, data = itevar, pmax = pmax, s = s,
d = d, shockvar = shockvar, d = d, histime = nhist, SIMPLIFY = FALSE)
ans <- mapply(IRFrf, data = itevar, pmax = pmax, s = s,
shockvar = shockvar, d = d, histime = nhist, SIMPLIFY = FALSE)
View(ans)
data = sim_dt
pmax = 5
s = 12
shockvar = 1
d = 1
n <- nrow(data) - pmax -s
itevar <- rep(list(data), n)
nhist <- 1:n
s <- rep(s, n)
d <- rep(d,n)
pmax <- rep(pmax, n)
shockvar <- rep(shockvar,n)
ans <- mapply(IRFrf, data = itevar, pmax = pmax, s = s,
shockvar = shockvar, d = d, histime = nhist, SIMPLIFY = FALSE)
source('E:/27_MyRPackages/VARrf/data-raw/IRFrf_general.R', echo=TRUE)
system.time()
Sys.time()
st_tm <- Sys.time()
Sys.time() - st_tm
source('E:/27_MyRPackages/VARrf/data-raw/IRFrf_general.R', echo=TRUE)
st_tm <- Sys.time()
IRFrf_gen(data = data)
Sys.time() - st_tm
load_all()
st_tm <- Sys.time()
IRFrf_gen(data = data)
Sys.time() - st_tm
document()
load("E:/17_HuaDong/reserch/FiscalCompany/RCode/data-raw/gvar.rdata")
source('E:/17_HuaDong/reserch/FiscalCompany/RCode/data-raw/main.R', encoding = 'UTF-8', echo=TRUE)
load("E:/17_HuaDong/reserch/FiscalCompany/RCode/data-raw/gvar.rdata")
library(pacman)
p_load(CADFtest, TBHB, VARrf, tidyverse, randomForestSRC)
# delete some missing data
gvar <- dplyr::select(gvar, -china_lr, -chl_lr)
# 将利率等转换为环比
ToHB <- function(gvar, varnm = 'swe_Dp'){
prodata <- gvar[,c('yr',varnm)]
prodata$year <- str_sub(prodata$yr,1,4) %>% as.numeric()
prodata$mon <- str_sub(prodata$yr,6) %>% as.numeric()
ans <- ConvertRatio(prodata, year = 'year', mon = 'mon', value.name = varnm, to = 'HB')
names(ans) <- str_replace(names(ans),'HB','')
ans <- ans[,3]
return(ans)
}
# Dp, r, lr如果不平稳，换为环比，其他不平稳直接差分
for (i in 2:ncol(gvar)) {
ans <- CADFtest(gvar[,i], type = 'trend', max.lag.y = 5)
if (ans$p.value > 0.1){
ans2 <- names(gvar)[i]
print(ans2)
ifelse (str_detect(ans2, '_Dp|_r|_lr'),
gvar[,i] <- ToHB(gvar, ans2),
gvar[,i] <- c(NA, diff(gvar[,i])))
}
}
# VARrf估计
# fit <- VARrf(gvar[-1,-1],pmax = 5)
regdata <- gvar[-1,-1]
imp_var <- 'usa_epu'
which(names(regdata) %in% imp_var)
irf <- IRFrf(gvar[-1,-1], pmax = 5, s = 12, shockvar = 13, d = sd(regdata$usa_epu))
library(devtools)
load_all()
irf <- IRFrf(gvar[-1,-1], pmax = 5, s = 12, shockvar = 13, d = sd(regdata$usa_epu))
View(irf_diff)
plot(irf_diff$china_y)
plot(irf_diff$china_epu)
View(fit)
View(irf)
IRFrf
IRFrf_gen(data = sim_dt[1:50,], pmax = 5, s = 5, shockvar = 1, ncores = 7)
irf <- IRFrf(gvar[-1,-1], pmax = 5, s = 5, shockvar = 13, d = sd(regdata$usa_epu))
devtools::document()
load("E:/17_HuaDong/reserch/FiscalCompany/RCode/data-raw/gvar.rdata")
load_all()
irf <- IRFrf_gen(regdata, pmax = 1, shockvar = 13, ncores = 7)
devtools::load_all()
irf <- IRFrf_gen(regdata, pmax = 1, shockvar = 13, ncores = 7)
rm(list = ls())
library(pacman)
p_load(CADFtest, TBHB, VARrf, tidyverse, randomForestSRC)
load('data-raw/gvar.rdata') # from gvardata.r
# delete some missing data
gvar <- dplyr::select(gvar, -china_lr, -chl_lr)
# 将利率等转换为环比
ToHB <- function(gvar, varnm = 'swe_Dp'){
prodata <- gvar[,c('yr',varnm)]
prodata$year <- str_sub(prodata$yr,1,4) %>% as.numeric()
prodata$mon <- str_sub(prodata$yr,6) %>% as.numeric()
ans <- ConvertRatio(prodata, year = 'year', mon = 'mon', value.name = varnm, to = 'HB')
names(ans) <- str_replace(names(ans),'HB','')
ans <- ans[,3]
return(ans)
}
# Dp, r, lr如果不平稳，换为环比，其他不平稳直接差分
for (i in 2:ncol(gvar)) {
ans <- CADFtest(gvar[,i], type = 'trend', max.lag.y = 5)
if (ans$p.value > 0.1){
ans2 <- names(gvar)[i]
print(ans2)
ifelse (str_detect(ans2, '_Dp|_r|_lr'),
gvar[,i] <- ToHB(gvar, ans2),
gvar[,i] <- c(NA, diff(gvar[,i])))
}
}
rm(list = ls())
library(pacman)
p_load(CADFtest, TBHB, VARrf, tidyverse, randomForestSRC)
# load('data-raw/gvar.rdata') # from gvardata.r
load('E:\\17_HuaDong\\reserch\\FiscalCompany\\RCode\\data-raw\\gvar.rdata')
# delete some missing data
gvar <- dplyr::select(gvar, -china_lr, -chl_lr)
# 将利率等转换为环比
ToHB <- function(gvar, varnm = 'swe_Dp'){
prodata <- gvar[,c('yr',varnm)]
prodata$year <- str_sub(prodata$yr,1,4) %>% as.numeric()
prodata$mon <- str_sub(prodata$yr,6) %>% as.numeric()
ans <- ConvertRatio(prodata, year = 'year', mon = 'mon', value.name = varnm, to = 'HB')
names(ans) <- str_replace(names(ans),'HB','')
ans <- ans[,3]
return(ans)
}
# Dp, r, lr如果不平稳，换为环比，其他不平稳直接差分
for (i in 2:ncol(gvar)) {
ans <- CADFtest(gvar[,i], type = 'trend', max.lag.y = 5)
if (ans$p.value > 0.1){
ans2 <- names(gvar)[i]
print(ans2)
ifelse (str_detect(ans2, '_Dp|_r|_lr'),
gvar[,i] <- ToHB(gvar, ans2),
gvar[,i] <- c(NA, diff(gvar[,i])))
}
}
# VARrf估计
# fit <- VARrf(gvar[-1,-1],pmax = 5)
regdata <- gvar[-1,-1]
imp_var <- 'usa_epu'
which(names(regdata) %in% imp_var)
irf <- IRFrf_gen(regdata, pmax = 1, shockvar = 13, ncores = 7)
View(itevar)
irf <- IRFrf(regdata, pmax = 1, s = 12, shockvar = 13, d = 1)
View(irf)
